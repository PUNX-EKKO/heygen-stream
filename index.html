<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Heygen Live Avatar</title>
</head>
<body>
  <video id="remoteVideo" autoplay playsinline style="width: 100%; max-width: 720px;"></video>

  <script src="https://unpkg.com/@livekit/client/dist/livekit-client.min.js"></script>
  <script>
    (async () => {
      const accessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NDc0MDQzMTEsImlzcyI6IkFQSUplMjZaamg4YUFYRCIsIm5iZiI6MTc0NzMxNzkxMSwic3ViIjoiY2xpZW50IiwidmlkZW8iOnsiY2FuUHVibGlzaCI6dHJ1ZSwiY2FuUHVibGlzaERhdGEiOnRydWUsImNhblN1YnNjcmliZSI6dHJ1ZSwiY2FuVXBkYXRlT3duTWV0YWRhdGEiOmZhbHNlLCJyb29tIjoiOWQ3OGY5NTItMzE5NS0xMWYwLWIzMTQtNTYyNjkyMTRmMTE5Iiwicm9vbUpvaW4iOnRydWV9fQ.KBbxYTwQYqik326yfcex2gPh2eHABJVRO3QToSFKgpY"; // Replace with token from Heygen
      const livekitURL = "wss://webrtc-signaling.heygen.io/v2-alpha/interactive-avatar/session/9d78f952-3195-11f0-b314-56269214f119"; // Replace with `realtime_endpoint`

      const room = new Livekit.Room();
      const videoElement = document.getElementById('remoteVideo');

      room.on(Livekit.RoomEvent.TrackSubscribed, (track) => {
        if (track.kind === 'video') {
          videoElement.srcObject = track.mediaStreamTrack ? new MediaStream([track.mediaStreamTrack]) : null;
        }
      });

      try {
        await room.connect(livekitURL, accessToken);
      } catch (error) {
        console.error('Connection failed:', error);
      }
    })();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HeyGen Livestream Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f4f4f4;
    }
    h1 {
      color: #333;
    }
    pre {
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      overflow-x: auto;
    }
    .status {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>HeyGen Livestream API Response</h1>
  <div class="status" id="status">Connecting to WebSocket...</div>
  <pre id="output"></pre>

  <script>
    const apiResponse = {
      code: 100,
      data: {
        session_id: "f8b0671c-315a-11f0-b6bf-223772d1bcc4",
        access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NDczNzkxMjQsImlzcyI6IkFQSUplMjZaamg4YUFYRCIsIm5iZiI6MTc0NzI5MjcyNCwic3ViIjoiY2xpZW50IiwidmlkZW8iOnsiY2FuUHVibGlzaCI6dHJ1ZSwiY2FuUHVibGlzaERhdGEiOnRydWUsImNhblN1YnNjcmliZSI6dHJ1ZSwiY2FuVXBkYXRlT3duTWV0YWRhdGEiOmZhbHNlLCJyb29tIjoiZjhiMDY3MWMtMzE1YS0xMWYwLWI2YmYtMjIzNzcyZDFiY2M0Iiwicm9vbUpvaW4iOnRydWV9fQ.cnlhLm-ZV9yAReNmdbkb2cLR9hC34Q_dmmlMhAiFUXo",
        url: "wss://heygen-feapbkvq.livekit.cloud",
        realtime_endpoint: "wss://webrtc-signaling.heygen.io/v2-alpha/interactive-avatar/session/f8b0671c-315a-11f0-b6bf-223772d1bcc4",
        is_paid: false,
        session_duration_limit: 600
      },
      message: "success"
    };

    const output = document.getElementById('output');
    const status = document.getElementById('status');

    output.innerText = JSON.stringify(apiResponse, null, 2);

    // Optional: Connect to the WebSocket
    const socket = new WebSocket(apiResponse.data.realtime_endpoint);

    socket.addEventListener('open', () => {
      status.innerText = '‚úÖ Connected to HeyGen WebSocket';
    });

    socket.addEventListener('message', (event) => {
      const newLog = `üì® Message Received:\n${event.data}\n\n`;
      output.innerText += newLog;
    });

    socket.addEventListener('close', () => {
      status.innerText = '‚ùå Disconnected from WebSocket';
    });

    socket.addEventListener('error', (error) => {
      status.innerText = '‚ö†Ô∏è Error connecting to WebSocket';
      console.error('WebSocket error:', error);
    });
  </script>
</body>
</html>
